(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{171:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"理解dom到底是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#理解dom到底是什么","aria-hidden":"true"}},[t._v("#")]),t._v(" 理解DOM到底是什么")]),t._v(" "),s("p",[t._v("文档对象模型或者说我们熟悉的“DOM”，web网页的一个界面。它本质上是允许程序读取和操作页面的内容，结构和样式的页面API。 接下来一一分解。")]),t._v(" "),s("h2",{attrs:{id:"网页如何构建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网页如何构建","aria-hidden":"true"}},[t._v("#")]),t._v(" 网页如何构建")]),t._v(" "),s("p",[t._v("浏览器如何从源HTML文档转到在视口中显示样式化和交互式页面称为“关键渲染路径”。 这些步骤大致可分为两个阶段。第一阶段涉及浏览器解析文档以确定最终将在页面上渲染的内容，第二阶段涉及浏览器执行渲染。\n"),s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/1/167676388b002149?w=828&h=442&f=png&s=86053",alt:""}}),t._v("\n第一阶段的结果是所谓的“渲染树”。 渲染树是将在页面上呈现的HTML元素及其相关样式的表示。 为了构建这个树，浏览器需要两件事：")]),t._v(" "),s("ol",[s("li",[t._v("CSSOM，元素相关样式的结构；")]),t._v(" "),s("li",[t._v("DOM，元素结构")])]),t._v(" "),s("h2",{attrs:{id:"dom如何创建（长啥样）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom如何创建（长啥样）","aria-hidden":"true"}},[t._v("#")]),t._v(" DOM如何创建（长啥样）")]),t._v(" "),s("p",[t._v("DOM是HTML源文档的基于对象的表示。它有一些差异，我们将在下面看到，但它本质上是一种尝试将HTML文档的结构和内容转换为可供各种程序使用的对象模型。")]),t._v(" "),s("p",[t._v("DOM的对象结构由所谓的“节点树”表示。 它之所以被称为树是因为它可以被认为是具有单个父茎的树，其分枝成几个子枝，每个子枝可以具有叶子。 在这种情况下，父“stem”是根<html>元素，子“branches”是嵌套元素，“leaves”是元素中的内容。")]),t._v(" "),s("p",[t._v("我们以此HTML文档为例：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!doctype html>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("My first web page"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Hello, world!"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("How are you?"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("此文档可以表示为以下节点树：")]),t._v(" "),s("div",{staticClass:"language-flow extra-class"},[s("pre",{pre:!0,attrs:{class:"language-flow"}},[s("code",[t._v("html\n    head\n        title\n            My first web page\n    body\n        h1\n            Hello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" world"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n        p\n            How are you"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n")])])]),s("h2",{attrs:{id:"dom不是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom不是什么","aria-hidden":"true"}},[t._v("#")]),t._v(" DOM不是什么")]),t._v(" "),s("p",[t._v("在上面给出的示例中，看起来DOM是源HTML文档的一对一映射或者你看到的DevTools的映射。 但是，正如我所提到的，存在差异。为了完全理解DOM是什么，我们需要看看它不是什么。")]),t._v(" "),s("h3",{attrs:{id:"dom不是你的html源文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom不是你的html源文档","aria-hidden":"true"}},[t._v("#")]),t._v(" DOM不是你的html源文档")]),t._v(" "),s("p",[t._v("尽管DOM是从源HTML文档创建的，但它并不总是完全相同。 有两个实例，DOM可以与源HTML不同。")]),t._v(" "),s("h4",{attrs:{id:"_1-当html无效时"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-当html无效时","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. 当HTML无效时")]),t._v(" "),s("p",[t._v("DOM是有效HTML文档的接口。 在创建DOM的过程中，浏览器可以纠正HTML代码中的一些无效。")]),t._v(" "),s("p",[t._v("我们以此HTML文档为例：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!doctype html>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    Hello, world!\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("该文档缺少"),s("code",[t._v("<head>")]),t._v("和"),s("code",[t._v("<body>")]),t._v("元素，这是有效HTML的要求。 如果我们查看生成的DOM树，我们将看到这已得到纠正：")]),t._v(" "),s("div",{staticClass:"language-flow extra-class"},[s("pre",{pre:!0,attrs:{class:"language-flow"}},[s("code",[t._v("html\n    head\n    body\n        Hello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" world"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),s("h4",{attrs:{id:"_2-当javascript修改了dom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-当javascript修改了dom","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. 当JavaScript修改了DOM")]),t._v(" "),s("p",[t._v("除了作为查看HTML文档内容的界面之外，还可以修改DOM，使其成为动态资源。")]),t._v(" "),s("p",[t._v("例如，我们可以使用Javascript为DOM创建其他节点。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newParagraph "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"p"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" paragraphContent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTextNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I\'m new!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnewParagraph"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("paragraphContent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newParagraph"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("如上会更改我们的DOM，但并不是更改了我们的HTML文档。")]),t._v(" "),s("h3",{attrs:{id:"dom不是你在浏览器中看到的（即渲染树）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom不是你在浏览器中看到的（即渲染树）","aria-hidden":"true"}},[t._v("#")]),t._v(" DOM不是你在浏览器中看到的（即渲染树）")]),t._v(" "),s("p",[t._v("你在浏览器视口中看到的是渲染树，正如我所提到的，它是DOM和CSSOM的组合。 真正将DOM与渲染树分开的是，后者只包含最终将在屏幕上绘制的内容。")]),t._v(" "),s("p",[t._v("因为渲染树仅关注渲染的内容，所以它会排除视觉上隐藏的元素。 例如，具有显示的元素：没有与之关联的样式。")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!doctype html>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Hello, world!"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token style-attr language-css"}},[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('="')]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" none"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("How are you?"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("上面的DOM结构将包含 "),s("code",[t._v("<p>")]),t._v(" 元素")]),t._v(" "),s("div",{staticClass:"language-flow extra-class"},[s("pre",{pre:!0,attrs:{class:"language-flow"}},[s("code",[t._v("html\n    head\n    body\n        h1\n            Hello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" world"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n        p\n            How are you"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n")])])]),s("p",[t._v("但是，渲染树，即我们在视口上所见，不包含这个p元素")]),t._v(" "),s("div",{staticClass:"language-flow extra-class"},[s("pre",{pre:!0,attrs:{class:"language-flow"}},[s("code",[t._v("html\n    body\n        h1\n            Hello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" world"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),s("h3",{attrs:{id:"dom不是devtools中的结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom不是devtools中的结构","aria-hidden":"true"}},[t._v("#")]),t._v(" DOM不是DevTools中的结构")]),t._v(" "),s("p",[t._v("这种差异有点小，因为DevTools元素检查器提供了我们在浏览器中最接近的DOM。 但是，DevTools检查器包含不在DOM中的其他信息。")]),t._v(" "),s("p",[t._v("最好的例子是CSS伪元素。 使用:: before和:: after选择器创建的伪元素构成CSSOM和渲染树的一部分，但在技术上不是DOM的一部分。 这是因为DOM仅由源HTML文档构建，不包括应用于元素的样式。")]),t._v(" "),s("p",[t._v("尽管伪元素不是DOM的一部分，但它们仍在我们的devtools元素检查器中。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/1/167678324a3de371?w=1522&h=976&f=png&s=111773",alt:""}}),t._v("\n这就是为什么伪元素不能被Javascript直接获取到的原因，因为伪元素不是DOM的一部分。")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("DOM是HTML文档的接口。 它被浏览器用作确定在视口中呈现内容的第一步，并通过Javascript程序来修改页面的内容，结构或样式。")]),t._v(" "),s("p",[t._v("虽然与其他形式的源HTML文档类似，但DOM在许多方面有所不同：")]),t._v(" "),s("ol",[s("li",[t._v("它总是有效的HTML")]),t._v(" "),s("li",[t._v("它是一个可以通过Javascript修改的结构")]),t._v(" "),s("li",[t._v("它不包含伪元素（例如:: after）")]),t._v(" "),s("li",[t._v("它确实包含隐藏元素（例如"),s("strong",[t._v("display：none")]),t._v("）")])])])}],!1,null,null,null);a.default=e.exports}}]);