(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{177:function(t,e,n){"use strict";n.r(e);var r=n(0),s=Object(r.a)({},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("blockquote",[n("p",[t._v("ä½œè€…ï¼šDan Abramov.  "),n("br"),t._v(" March 16, 2019 â€¢ â˜•ï¸â˜•ï¸â˜•ï¸â˜•ï¸â˜•ï¸ 24 min read  "),n("br"),t._v("åŸæ–‡é“¾æ¥ï¼š"),n("a",{attrs:{href:"https://overreacted.io/writing-resilient-components/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Writing Resilient Components"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("å½“äººä»¬å¼€å§‹å­¦ä¹ Reactæ—¶ï¼Œä»–ä»¬ç»å¸¸ä¼šè¦æ±‚æä¾›é£æ ¼æŒ‡å—ã€‚è™½ç„¶åœ¨é¡¹ç›®ä¸­åº”ç”¨ä¸€äº›ä¸€è‡´çš„è§„åˆ™æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œä½†å¾ˆå¤šéƒ½æ˜¯éšæ„çš„ --- å› æ­¤Reactå¯¹ä»–ä»¬æ²¡æœ‰å¼ºçƒˆçš„è¦æ±‚æ„è§ã€‚")]),t._v(" "),n("p",[t._v("æ‚¨å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç±»å‹ç³»ç»Ÿï¼Œå‡½æ•°å£°æ˜æˆ–è€…ç®­å¤´å‡½æ•°ï¼ŒæŒ‰å­—æ¯é¡ºåºæˆ–è€…æŒ‰æ‚¨å–œæ¬¢çš„æ–¹å¼æ’åºpropsã€‚")]),t._v(" "),n("p",[t._v("è¿™ç§çµæ´»æ€§å…è®¸å°†"),n("a",{attrs:{href:"https://reactjs.org/docs/add-react-to-a-website.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Reacté›†æˆ"),n("OutboundLink")],1),t._v("åˆ°ç°æœ‰çº¦å®šçš„é¡¹ç›®ä¸­ï¼Œä½†å®ƒä¹Ÿå¼•å‘äº†æ— ä¼‘æ­¢çš„äº‰è®ºã€‚")]),t._v(" "),n("p",[t._v("æ¯ä¸ªç»„ä»¶åº”åŠªåŠ›éµå¾ªä¸€äº›é‡è¦çš„è®¾è®¡åŸåˆ™ã€‚ä½†æˆ‘ä¸è®¤ä¸ºé£æ ¼æŒ‡å—ä¼šå¾ˆå¥½çš„æŠ“ä½è¿™äº›åŸåˆ™ï¼Œæˆ‘ä»¬å…ˆè®¨è®ºé£æ ¼æŒ‡å—ï¼Œç„¶åå†çœ‹çœ‹ "),n("a",{attrs:{href:"https://overreacted.io/writing-resilient-components/#writing-resilient-components",target:"_blank",rel:"noopener noreferrer"}},[t._v("çœŸæ­£æœ‰ç”¨çš„åŸåˆ™"),n("OutboundLink")],1)]),t._v(" "),t._m(0),t._v(" "),n("p",[t._v("åœ¨æˆ‘ä»¬è®¨è®ºç»„ä»¶è®¾è®¡åŸåˆ™ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆè°ˆè°ˆé£æ ¼æŒ‡å—ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªæµè¡Œçš„è§‚ç‚¹ï¼Œä½†æœ‰äººéœ€è¦è¯´å‡ºæ¥ï¼")]),t._v(" "),n("p",[t._v("åœ¨JavaScriptç¤¾åŒºä¸­ï¼Œæœ‰ä¸€äº›ç”±linterå¼ºåˆ¶æ‰§è¡Œçš„ä¸¥æ ¼è‡ªç”¨çš„é£æ ¼æŒ‡å—ã€‚æˆ‘ä¸ªäººçš„è§‚å¯Ÿæ˜¯ï¼Œä»–ä»¬å¾€å¾€ä¼šäº§ç”Ÿæ¯”ä»–ä»¬çš„ä»·å€¼æ›´å¤šçš„æ‘©æ“¦ã€‚æˆ‘æ— æ³•è®¡ç®—æœ‰å¤šå°‘äººå‘æˆ‘å±•ç¤ºäº†ä¸€äº›ç»å¯¹æœ‰æ•ˆçš„ä»£ç ï¼Œå¹¶è¯´â€œReactæŠ±æ€¨è¿™ä¸ªâ€ï¼Œä½†è¿™æ˜¯ä»–ä»¬çš„linté…ç½®æŠ±æ€¨ï¼è¿™å¯¼è‡´äº†ä¸‰ä¸ªé—®é¢˜ï¼š")]),t._v(" "),t._m(1),t._v(" "),n("p",[t._v("æˆ‘æ˜¯è¯´æˆ‘ä»¬åº”è¯¥åœæ­¢ä½¿ç”¨linterï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚")]),t._v(" "),n("p",[t._v("**é€šè¿‡è‰¯å¥½çš„é…ç½®ï¼Œlinteræ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œå¯ä»¥åœ¨é”™è¯¯å‘ç”Ÿä¹‹å‰æ•è·å®ƒä»¬ã€‚**å®ƒè¿‡äºä¸“æ³¨äºé£æ ¼ï¼Œä½¿å…¶å˜å¾—åˆ†æ•£æ³¨æ„åŠ›ã€‚")]),t._v(" "),t._m(2),t._v(" "),n("p",[t._v("è¿™æ˜¯æˆ‘å»ºè®®ä½ å‘¨ä¸€åšçš„ã€‚èŠ±åŠå°æ—¶ä»”ç»†æ£€æŸ¥æ”¶é›†ä½ çš„å›¢é˜Ÿåœ¨é¡¹ç›®é…ç½®ä¸­å¯ç”¨çš„æ¯ä¸ªlintè§„åˆ™ï¼Œå¹¶é—®è‡ªå·±ï¼šâ€œè¿™ä¸ªè§„åˆ™æ˜¯å¦å¸®åŠ©æˆ‘ä»¬æ•è·äº†ä¸€ä¸ªé”™è¯¯ï¼Ÿâ€å¦‚æœæ²¡æœ‰ï¼Œè¯·å°†å…¶å…³é—­ã€‚ï¼ˆæ‚¨ä¹Ÿå¯ä»¥ä»eslint-config-react-appæ²¡æœ‰æ ·å¼è§„åˆ™çš„å¹²å‡€å¹³æ¿å¼€å§‹ã€‚ï¼‰")]),t._v(" "),n("p",[t._v("è‡³å°‘ï¼Œä½ çš„å›¢é˜Ÿåº”è¯¥æœ‰ä¸€ä¸ªåˆ é™¤å¯¼è‡´æ‘©æ“¦çš„è§„åˆ™çš„è¿‡ç¨‹ã€‚ä¸è¦ä»¥ä¸ºä¸€å¹´å‰ä½ æˆ–åˆ«äººæ·»åŠ åˆ°ä½ çš„linté…ç½®ä¸­çš„ä»»ä½•ä¸œè¥¿éƒ½æ˜¯â€œæœ€ä½³å®è·µâ€ã€‚æå‡ºé—®é¢˜å¹¶å¯»æ‰¾ç­”æ¡ˆã€‚ä¸è¦è®©ä»»ä½•äººå‘Šè¯‰ä½ ï¼Œä½ ä¸å¤Ÿèªæ˜ï¼Œä¸èƒ½é€‰æ‹©ä½ çš„lintè§„åˆ™ã€‚")]),t._v(" "),n("p",[t._v("ä½†æ˜¯**æ ¼å¼å‘¢ï¼Ÿ**ä½¿ç”¨prettierç„¶åå¿˜è®°æ ·å¼æ·¹æ²¡ã€‚ä½ ä¸éœ€è¦ä¸€ä¸ªå·¥å…·å¯¹ä½ å¤§å–Šå¤§å«è¯´éœ€è¦é¢å¤–çš„ç©ºé—´è®©å¦å¤–çš„å·¥å…·ä¸ºä½ ä¿®å¤å®ƒã€‚ä½¿ç”¨linteræ‰¾åˆ°bugï¼Œè€Œä¸æ˜¯æ¥å¼ºåŒ–ç¾å­¦ã€‚")]),t._v(" "),n("p",[t._v("å½“ç„¶ï¼Œç¼–ç é£æ ¼çš„æŸäº›æ–¹é¢ä¸æ ¼å¼æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œä½†åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ä¸ä¸€è‡´æ—¶ä»ç„¶ä¼šå¾ˆçƒ¦äººã€‚")]),t._v(" "),n("p",[t._v("ç„¶è€Œï¼Œä»–ä»¬ç§å¤§å¤šæ•°å¾ˆå¾®å¦™ä»¥è‡³äºéš¾ä»¥è¢«lintè§„åˆ™æ•è·ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å›¢é˜Ÿæˆå‘˜ä¹‹é—´å»ºç«‹ä¿¡ä»»ä»¥åŠä»¥wikié¡µé¢æˆ–è€…ç®€çŸ­è®¾è®¡æŒ‡å—å½¢å¼åˆ†äº«æœ‰ç”¨ä¿¡æ¯æ˜¯éå¸¸é‡è¦çš„åŸå› ã€‚")]),t._v(" "),n("p",[t._v("å¹¶éä¸€åˆ‡éƒ½å€¼å¾—è‡ªåŠ¨åŒ–ï¼ä»å®é™…é˜…è¯»è¿™æ ·ä¸€ä¸ªæŒ‡å—ä¸­çš„åŸºæœ¬åŸç†ä¸­è·å¾—çš„è§è§£å¯èƒ½æ¯”éµå¾ªâ€œè§„åˆ™â€æ›´æœ‰ä»·å€¼ã€‚")]),t._v(" "),n("p",[t._v("ä½†å¦‚æœéµå¾ªä¸¥æ ¼çš„é£æ ¼æŒ‡å—æ˜¯åˆ†æ•£æ³¨æ„åŠ›ï¼Œé‚£ä¹ˆå®é™…ä¸Šé‡è¦çš„æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),n("p",[t._v("è¿™æ˜¯è¿™ç¯‡æ–‡ç« çš„ä¸»é¢˜ã€‚")]),t._v(" "),t._m(3),t._v(" "),n("p",[t._v("æŒ‰å­—æ¯é¡ºåºæ’åˆ—çš„ç¼©è¿›æˆ–æ’åºæ•°é‡ä¸èƒ½ä¿®å¤æŸåçš„è®¾è®¡ã€‚å› æ­¤ï¼Œæˆ‘ä¸ä¼šå…³æ³¨æŸäº›ä»£ç çš„å¤–è§‚ï¼Œè€Œæ˜¯å…³æ³¨å®ƒçš„å·¥ä½œåŸç†ã€‚æˆ‘å‘ç°æœ‰ä¸€äº›ç»„ä»¶è®¾è®¡åŸåˆ™éå¸¸æœ‰ç”¨ï¼š")]),t._v(" "),t._m(4),t._v(" "),n("p",[t._v("å³ä½¿æ‚¨ä¸ä½¿ç”¨Reactï¼Œæ‚¨ä¹Ÿå¯èƒ½ä¼šé€šè¿‡è¯•éªŒå’Œé”™è¯¯å‘ç°å…·æœ‰å•å‘æ•°æ®æµçš„ä»»ä½•UIç»„ä»¶æ¨¡å‹çš„ç›¸åŒåŸåˆ™ã€‚")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),n("p",[t._v("å½“æœ‰äººä½¿ç”¨ä½ çš„ç»„ä»¶æ—¶ï¼Œä»–ä»¬æœŸæœ›éšæ—¶èƒ½ä¼ é€’ä¸åŒçš„propsï¼Œç»„ä»¶éƒ½èƒ½å“åº”è¿™äº›æ”¹å˜ï¼š")]),t._v(" "),t._m(7),n("p",[t._v("é€šå¸¸ï¼Œè¿™æ˜¯Reacté»˜è®¤çš„å·¥ä½œæ–¹å¼ã€‚å¦‚æœä½ åœ¨Buttonç»„ä»¶ä½¿ç”¨color propå±æ€§ï¼Œæ‚¨å°†çœ‹åˆ°ä¸Šé¢ä¸ºæ¸²æŸ“æä¾›çš„å€¼ï¼š")]),t._v(" "),t._m(8),n("p",[t._v("ç„¶è€Œï¼Œå­¦ä¹ Reactæ—¶é€šå¸¸çš„é”™è¯¯æ˜¯å¤åˆ¶propså€¼åˆ°stateï¼š")]),t._v(" "),t._m(9),n("p",[t._v("å¦‚æœä½ åœ¨Reactä¹‹å¤–ä½¿ç”¨classesä¼šæ›´åŠ ç›´è§‚ã€‚ç„¶è€Œï¼Œèµ‹å€¼propsåˆ°stateï¼Œä½ å°†ä¼šå¿½ç•¥æ‰€æœ‰å¯¹å®ƒçš„æ›´æ–°ã€‚")]),t._v(" "),t._m(10),n("p",[t._v("åœ¨æå°‘æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„è¡Œä¸ºæ˜¯æ•…æ„çš„ï¼Œç¡®ä¿è°ƒç”¨initialColoræˆ–è€…defaultColor propså€¼æ²¡æœ‰æ›´æ”¹æ˜¯è¢«æ¾„æ¸…å¿½ç•¥çš„ã€‚")]),t._v(" "),t._m(11),t._v(" "),t._m(12),n("p",[t._v("è®¡ç®—å€¼æ˜¯å¦å¤–ä¸€ä¸ªäººä»¬æœ‰æ—¶è¯•å›¾èµ‹å€¼propsç»™stateçš„åŸå› ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æ ¹æ®ä»¥èƒŒæ™¯ä¸ºå‚æ•°çš„å¤æ‚è®¡ç®—ä»¥å»ç¡®å®šæŒ‰é’®æ–‡æœ¬é¢œè‰²colorï¼š")]),t._v(" "),t._m(13),n("p",[t._v("è¿™ä¸ªç»„ä»¶æ—¶æœ‰é”™è¯¯çš„ï¼Œå› ä¸ºå½“propså±æ€§çš„coloræ”¹å˜çš„æ—¶å€™ï¼Œå®ƒä¸ä¼šå†å»è®¡ç®—this.state.textColorçš„å€¼ã€‚æœ€ç®€å•çš„è§£å†³æ–¹æ³•æ˜¯å°†textColorçš„è®¡ç®—æ–¹æ³•ç§»åˆ°renderæ–¹æ³•å†…ï¼Œå¹¶ä½¿ç”¨PureComponentç»„ä»¶ï¼š")]),t._v(" "),t._m(14),n("p",[t._v("é—®é¢˜è§£å†³äº†ï¼ç°åœ¨å½“propsæ”¹å˜ï¼Œæˆ‘ä»¬å°†é‡æ–°è®¡ç®—textColorï¼Œä½†æˆ‘ä»¬é¿å…äº†åœ¨ç›¸åŒçš„propsæƒ…å†µä¸‹é«˜æ˜‚è®¡ç®—ã€‚")]),t._v(" "),n("p",[t._v("ç„¶è€Œï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–å®ƒã€‚å¦‚æœæ—¶childrençš„propæ”¹å˜å‘¢ï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹é‡æ–°è®¡ç®—textColorä¼¼ä¹å¾ˆä¸å¹¸ã€‚æˆ‘ä»¬çš„ç¬¬äºŒæ¬¡å°è¯•å¯èƒ½æ˜¯åœ¨componentDidupdateæ—¶è°ƒç”¨è®¡ç®—ã€‚")]),t._v(" "),t._m(15),n("p",[t._v("ä½†æ˜¯ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬çš„ç»„ä»¶åœ¨æ¯æ¬¡æ›´æ”¹åéƒ½ä¼šè¿›è¡Œç¬¬äºŒæ¬¡é‡æ–°æ¸²æŸ“ã€‚å¦‚æœæˆ‘ä»¬è¯•å›¾ä¼˜åŒ–å®ƒï¼Œé‚£ä¹Ÿä¸ç†æƒ³ã€‚")]),t._v(" "),n("p",[t._v("ä½ å¯ä»¥ä½¿ç”¨é—ç•™çš„componentWillReceivePropsç”Ÿå‘½å‘¨æœŸé’©å­ã€‚ç„¶è€Œï¼Œäººä»¬ç»å¸¸æå‡ºäº›å‰¯ä½œç”¨ã€‚åè¿‡æ¥ï¼Œè¿™é€šå¸¸ä¼šå¯¼è‡´å³å°†å‡ºç°çš„åƒ"),n("a",{attrs:{href:"https://reactjs.org/blog/2018/03/01/sneak-peek-beyond-react-16.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Time Slicing and Suspense"),n("OutboundLink")],1),t._v("Concurrent RenderingåŠŸèƒ½ã€‚è€Œâ€œæ›´å®‰å…¨â€çš„getDeRivedStateFromPropsæ–¹æ³•å¾ˆç¬¨é‡ã€‚")]),t._v(" "),n("p",[t._v("è®©æˆ‘ä»¬é€€åä¸€æ­¥ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬æƒ³è¦"),n("a",{attrs:{href:"https://en.wikipedia.org/wiki/Memoization",target:"_blank",rel:"noopener noreferrer"}},[t._v("memoization"),n("OutboundLink")],1),t._v("ã€‚æˆ‘ä»¬æœ‰ä¸€äº›è¾“å…¥ï¼Œé™¤éè¾“å…¥å‘ç”Ÿå˜åŒ–ï¼Œå¦åˆ™æˆ‘ä»¬ä¸æƒ³é‡æ–°è®¡ç®—è¾“å‡ºã€‚")]),t._v(" "),n("p",[t._v("ä½¿ç”¨Classï¼Œå‚è€ƒ"),n("a",{attrs:{href:"https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#what-about-memoization",target:"_blank",rel:"noopener noreferrer"}},[t._v("memoization helper"),n("OutboundLink")],1),t._v("ã€‚ç„¶è€Œï¼ŒHooksæ›´è¿›ä¸€æ­¥ï¼Œä¸ºæ‚¨æä¾›äº†ä¸€ç§è®°å¿†æ˜‚è´µè®¡ç®—çš„å†…ç½®æ–¹æ³•ï¼š")]),t._v(" "),t._m(16),n("p",[t._v("è¿™å°±æ˜¯ä½ éœ€è¦çš„æ‰€æœ‰ä»£ç ï¼")]),t._v(" "),n("p",[t._v("åœ¨ç±»ç»„ä»¶ç§ï¼Œä½ å¯ä»¥ä½¿ç”¨"),n("a",{attrs:{href:"https://github.com/alexreardon/memoize-one",target:"_blank",rel:"noopener noreferrer"}},[t._v("memoize-one"),n("OutboundLink")],1),t._v("ï¼Œåœ¨å‡½æ•°å¼ç»„ä»¶ï¼ŒuseMemo hooksä¸ºæ‚¨æä¾›ç›¸åŒçš„åŠŸèƒ½ã€‚")]),t._v(" "),n("p",[t._v("ç°åœ¨æˆ‘ä»¬çœ‹åˆ°å³ä½¿ä¼˜åŒ–é«˜æ˜‚çš„ç®—ä¹Ÿä¸æ˜¯èµ‹å€¼propsåˆ°stateçš„åŸå› ã€‚æˆ‘ä»¬çš„æ¸²æŸ“ç»“æœåº”è¯¥éµå¾ªpropsçš„æ”¹å˜ã€‚")]),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),n("p",[t._v("è€ƒè™‘ä¸€ä¸‹è¿™ä¸ªReactç»„ä»¶ï¼š")]),t._v(" "),t._m(19),n("p",[t._v("å¾ˆå¤šç»„ä»¶éƒ½æ˜¯è¿™æ ·çš„ --- ä½†å¦‚æœæˆ‘ä»¬çœ‹ä»”ç»†ï¼Œæˆ‘ä»¬ä¼šæ³¨æ„åˆ°ä¸€ä¸ªbugã€‚fetchResultsæ–¹æ³•ä½¿ç”¨propså±æ€§å€¼queryè·å–æ•°æ®ï¼š")]),t._v(" "),t._m(20),t._m(21),t._v(" "),n("p",[t._v("ä¸ºäº†ä¿®å¤æ­¤ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ï¼š")]),t._v(" "),t._m(22),t._v(" "),t._m(23),n("p",[t._v("ç°åœ¨æˆ‘ä»¬çš„ä»£ç éµå¾ªpropsçš„æ‰€æœ‰æ›´æ”¹ï¼Œç”šè‡³æ˜¯å‰¯ä½œç”¨ã€‚")]),t._v(" "),n("p",[t._v("ç„¶è€Œï¼Œè®°ä½ä¸è¦å†ç ´åå®ƒæ˜¯å¾ˆæœ‰æŒ‘æˆ˜æ€§çš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ·»åŠ currentPageåˆ°æœ¬åœ°çŠ¶æ€ï¼Œå¹¶åœ¨getFetchUrlä½¿ç”¨å®ƒï¼š")]),t._v(" "),t._m(24),n("p",[t._v("å”‰ï¼Œæˆ‘ä»¬çš„ä»£ç åˆæ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„å‰¯ä½œç”¨ä¸éµå¾ªcurrentPageå˜åŒ–ã€‚")]),t._v(" "),n("p",[t._v("propså’Œstateæ˜¯Reactæ•°æ®æµçš„ä¸€éƒ¨åˆ†ã€‚æ¸²æŸ“å’Œå‰¯ä½œç”¨éƒ½åº”è¯¥åæ˜ æ•°æ®æµçš„å˜åŒ–ï¼Œè€Œä¸æ˜¯å¿½ç•¥ä»–ä»¬ã€‚")]),t._v(" "),n("p",[t._v("è¦ä¿®å¤ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥é‡å¤ä¸Šè¿°ä»£ç ï¼š")]),t._v(" "),t._m(25),t._v(" "),n("p",[t._v("è®©æˆ‘ä»¬ä¿®å¤æˆ‘ä»¬çš„ç»„ä»¶æ¥å¤„ç†currentPageçŠ¶æ€æ›´æ–°ï¼š")]),t._v(" "),t._m(26),t._m(27),t._v(" "),n("p",[t._v("ä¸å¹¸çš„æ˜¯ï¼Œè‡ªåŠ¨æ£€æŸ¥ç±»ç»„ä»¶çš„ä¸€è‡´æ€§å¤ªå›°éš¾äº†ã€‚ä»»ä½•æ–¹æ³•éƒ½å¯ä»¥è°ƒç”¨ä»»ä½•å…¶ä»–æ–¹æ³•ã€‚é™æ€åœ°åˆ†æcomponentDidMountå’ŒcomponentDidUpdateä¼šå……æ»¡è¯¯æŠ¥ã€‚")]),t._v(" "),n("p",[t._v("ä½†æ˜¯ï¼Œå¯ä»¥è®¾è®¡ä¸€ä¸ªå¯ä»¥é™æ€åˆ†æä¸€è‡´æ€§çš„API ã€‚React useEffect Hookæ˜¯è¿™æ ·çš„APIçš„ç¤ºä¾‹ï¼š")]),t._v(" "),t._m(28),n("p",[t._v("æˆ‘ä»¬å°†é€»è¾‘æ”¾åœ¨effecté‡Œï¼Œè¿™æ ·å¯ä»¥æ›´å®¹æ˜“åœ°çœ‹åˆ°å®ƒä¾èµ–çš„Reactæ•°æ®æµä¸­çš„å“ªäº›å€¼ã€‚è¿™äº›å€¼ç§°ä¸ºâ€œä¾èµ–é¡¹â€ï¼Œåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­å®ƒä»¬æ˜¯[currentPage, query]ã€‚")]),t._v(" "),n("p",[t._v("æ³¨æ„è¿™ä¸ªâ€œeffect ä¾èµ–é¡¹â€æ•°ç»„å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„å†…å®¹ã€‚åœ¨classä¸­ï¼Œæˆ‘ä»¬ä¸å¾—ä¸é€šè¿‡æ‰€æœ‰çš„æ–¹æ³•å›è°ƒæ¥æœç´¢â€œä¾èµ–é¡¹â€ã€‚è¯¥useEffect APIåªæ˜¯è®©åŒä¸€ä¸ªæ¦‚å¿µæ˜ç¡®ã€‚")]),t._v(" "),n("p",[t._v("åä¹‹ï¼Œæˆ‘ä»¬è‡ªåŠ¨éªŒè¯å®ƒï¼š")]),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),n("p",[t._v("ä½¿ç”¨ç±»APIï¼Œæ‚¨å¿…é¡»è‡ªå·±è€ƒè™‘ä¸€è‡´æ€§ï¼Œå¹¶éªŒè¯å¯¹æ¯ä¸ªç›¸å…³propæˆ–stateçš„æ›´æ”¹æ˜¯ç”±ä½•componentDidUpdateå¤„ç†çš„ã€‚å¦åˆ™ï¼Œæ‚¨çš„ç»„ä»¶å¯¹propå’ŒçŠ¶æ€æ›´æ”¹ä¸å…·æœ‰å¼¹æ€§ã€‚è¿™ç”šè‡³ä¸æ˜¯ç‰¹å®šäºReactçš„é—®é¢˜ã€‚å®ƒé€‚ç”¨äºä»»ä½•å…è®¸æ‚¨å•ç‹¬å¤„ç†â€œåˆ›å»ºâ€å’Œâ€œæ›´æ–°â€çš„UIåº“ã€‚")]),t._v(" "),n("p",[t._v("è¯¥useEffect APIé€šè¿‡é¼“åŠ±ä¸€è‡´æ€§ç¿»è½¬é»˜è®¤å€¼ã€‚ä¸€å¼€å§‹å¯èƒ½ä¼šæ„Ÿåˆ°é™Œç”Ÿï¼Œä½†ç»“æœæ˜¯æ‚¨çš„ç»„ä»¶å¯¹é€»è¾‘æ›´æ”¹æ›´å…·å¼¹æ€§ã€‚ç”±äºâ€œä¾èµ–å…³ç³»â€ç°åœ¨æ˜¯æ˜ç¡®çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨lintè§„åˆ™éªŒè¯æ•ˆæœæ˜¯å¦ä¸€è‡´ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªlintæ¥æ•è·bugï¼")]),t._v(" "),t._m(31),t._v(" "),n("p",[t._v("è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯æ‚¨å¯èƒ½ä¼šæ„å¤–å¿½ç•¥å¯¹propsçš„æ›´æ”¹ã€‚å½“æ‚¨æ‰‹åŠ¨ä¼˜åŒ–ç»„ä»¶æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿæ­¤é”™è¯¯ã€‚")]),t._v(" "),n("p",[t._v("è¯·æ³¨æ„ï¼Œä½¿ç”¨æµ…ç­‰å¼PureComponentå’ŒReact.memoé»˜è®¤æ¯”è¾ƒçš„ä¼˜åŒ–æ–¹æ³•æ˜¯å®‰å…¨çš„ã€‚")]),t._v(" "),t._m(32),t._v(" "),t._m(33),n("p",[t._v("ä¸€å¼€å§‹å¾ˆå®¹æ˜“é”™è¿‡è¿™ä¸ªé”™è¯¯ï¼Œå› ä¸ºå¯¹äºç±»ï¼Œä½ é€šå¸¸ä¼šä¼ é€’ä¸€ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥å®ƒä¼šæœ‰ç›¸åŒçš„ç‰¹æ€§ï¼š")]),t._v(" "),t._m(34),n("p",[t._v("æ‰€ä»¥æˆ‘ä»¬çš„ä¼˜åŒ–ä¸ä¼šç«‹å³ä¸­æ–­ã€‚ä½†æ˜¯ï¼ŒonClickå¦‚æœå®ƒéšæ—¶é—´å˜åŒ–ï¼Œå®ƒå°†ä¿æŒâ€œçœ‹åˆ°â€æ—§å€¼ä½†å…¶ä»–propsä¸ä¼šï¼š")]),t._v(" "),t._m(35),n("p",[t._v("åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå•å‡»æŒ‰é’®åº”ç¦ç”¨å®ƒ - ä½†è¿™ä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºButtonç»„ä»¶å¿½ç•¥å¯¹onClick propçš„ä»»ä½•æ›´æ–°ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœå‡½æ•°æ ‡è¯†æœ¬èº«ä¾èµ–äºå¯èƒ½éšæ—¶é—´å˜åŒ–çš„ä¸œè¥¿ï¼Œè¿™å¯èƒ½ä¼šå˜å¾—æ›´åŠ æ··ä¹±ï¼Œå¦‚ä¸‹draft.contentä¾‹æ‰€ç¤ºï¼š")]),t._v(" "),t._m(36),n("p",[t._v("è™½ç„¶draft.contentå¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ”¹å˜ï¼Œä½†æˆ‘ä»¬çš„Buttonç»„ä»¶å¿½ç•¥äº†onClick å¯¹propçš„æ›´æ”¹ï¼Œå› æ­¤å®ƒç»§ç»­çœ‹åˆ°onClickç»‘å®šæ–¹æ³•çš„â€œç¬¬ä¸€ä¸ªç‰ˆæœ¬â€ ä¸åŸå§‹ç‰ˆæœ¬draft.contentã€‚")]),t._v(" "),n("p",[t._v("é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•é¿å…è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ")]),t._v(" "),n("p",[t._v("æˆ‘å»ºè®®é¿å…æ‰‹åŠ¨å®ç°shouldComponentUpdateå¹¶é¿å…æŒ‡å®šè‡ªå®šä¹‰æ¯”è¾ƒReact.memo()ã€‚é»˜è®¤çš„æµ…æ¯”è¾ƒReact.memoå°†ä¼šæ”¹å˜åŠŸèƒ½æ ‡è¯†ï¼š")]),t._v(" "),t._m(37),n("p",[t._v("åœ¨ç±»ä¸­ï¼ŒPureComponentå…·æœ‰ç›¸åŒçš„è¡Œä¸ºã€‚")]),t._v(" "),n("p",[t._v("è¿™ç¡®ä¿äº†å°†ä¸åŒçš„å‡½æ•°ä½œä¸ºpropsä¼ é€’å°†å§‹ç»ˆæœ‰æ•ˆã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœæ‚¨åšæŒè‡ªå®šä¹‰æ¯”è¾ƒï¼Œè¯·ç¡®ä¿ä¸è¦è·³è¿‡å‡½æ•°ï¼š")]),t._v(" "),t._m(38),n("p",[t._v("æ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼Œåœ¨ç±»ç»„ä»¶ä¸­å¾ˆå®¹æ˜“å¿½ç•¥è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºæ–¹æ³•æ ‡è¯†é€šå¸¸æ˜¯ç¨³å®šçš„ï¼ˆä½†å¹¶éæ€»æ˜¯å¦‚æ­¤ - è€Œè¿™å°±æ˜¯é”™è¯¯è°ƒè¯•éš¾çš„åœ°æ–¹ï¼‰ã€‚æœ‰äº†Hooksï¼Œæƒ…å†µæœ‰ç‚¹ä¸åŒï¼š")]),t._v(" "),n("ol",[n("li",[t._v("æ¯æ¬¡æ¸²æŸ“å‡½æ•°ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä½ å‘ç°è¿™ä¸ª"),n("a",{attrs:{href:"https://github.com/facebook/react/issues/14972#issuecomment-468280039",target:"_blank",rel:"noopener noreferrer"}},[t._v("é—®é¢˜"),n("OutboundLink")],1),t._v("çš„æ—¶å€™äº†ã€‚")]),t._v(" "),n("li",[t._v("ä½¿ç”¨useCallbackå’ŒuseContextï¼Œæ‚¨å¯ä»¥é¿å…å®Œå…¨å‘ä¸‹ä¼ é€’å‡½æ•°ã€‚è¿™ä½¿æ‚¨å¯ä»¥ä¼˜åŒ–æ¸²æŸ“è€Œæ— éœ€æ‹…å¿ƒå‡½æ•°ã€‚")])]),t._v(" "),t._m(39),t._v(" "),n("p",[t._v("æ— è®ºä½•æ—¶ä½¿ç”¨propså’ŒçŠ¶æ€ï¼Œè¯·è€ƒè™‘å¦‚æœå®ƒä»¬å‘ç”Ÿå˜åŒ–ä¼šå‘ç”Ÿä»€ä¹ˆã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç»„ä»¶ä¸åº”ä»¥ä¸åŒæ–¹å¼å¤„ç†åˆå§‹æ¸²æŸ“å’Œæ›´æ–°ã€‚è¿™ä½¿å®ƒèƒ½å¤Ÿé€‚åº”é€»è¾‘ä¸Šçš„å˜åŒ–ã€‚")]),t._v(" "),n("p",[t._v("å¯¹äºç±»ï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ä½¿ç”¨propså’Œstateæ—¶å¾ˆå®¹æ˜“å¿˜è®°æ›´æ–°ã€‚Hooksæ¨åŠ¨ä½ åšæ­£ç¡®çš„äº‹æƒ… - ä½†æ˜¯å¦‚æœä½ ä¸ä¹ æƒ¯å·²ç»åšè¿‡ï¼Œå®ƒä¼šéœ€è¦ä¸€äº›å¿ƒç†è°ƒæ•´ã€‚")]),t._v(" "),t._m(40),t._v(" "),n("p",[t._v("Reactç»„ä»¶ä½¿æ‚¨å¯ä»¥ç¼–å†™æ¸²æŸ“ä»£ç è€Œæ— éœ€æ‹…å¿ƒå¤ªå¤šæ—¶é—´ã€‚æ‚¨æè¿°äº†UI åœ¨ä»»ä½•ç»™å®šæ—¶åˆ»åº”è¯¥å¦‚ä½•çœ‹å¾…ï¼Œè€ŒReactä½¿å®ƒæˆä¸ºç°å®ã€‚åˆ©ç”¨å¥½é‚£ä¸ªæ¨¡å‹ï¼")]),t._v(" "),n("p",[t._v("ä¸è¦è¯•å›¾åœ¨ç»„ä»¶è¡Œä¸ºä¸­å¼•å…¥ä¸å¿…è¦çš„æ—¶åºå‡è®¾ã€‚æ‚¨çš„ç»„ä»¶åº”è¯¥éšæ—¶å¯ä»¥é‡æ–°æ¸²æŸ“ã€‚")]),t._v(" "),n("p",[t._v("å¦‚ä½•è¿åè¿™ä¸€åŸåˆ™ï¼ŸReactå¹¶ä¸å®¹æ˜“ - ä½†æ‚¨å¯ä»¥ä½¿ç”¨é—ç•™componentWillReceivePropsç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥å®ç°ï¼š")]),t._v(" "),t._m(41),n("p",[t._v("åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¿æŒvalueåœ¨æœ¬åœ°çŠ¶æ€ï¼Œä½†æˆ‘ä»¬ä¹Ÿä»propsæ¥æ”¶valueã€‚æ¯å½“æˆ‘ä»¬â€œæ”¶åˆ°æ–°propsâ€æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šé‡ç½®valueè¿›å…¥stateã€‚")]),t._v(" "),t._m(42),t._v(" "),n("p",[t._v("ä¹Ÿè®¸ä»Šå¤©è¿™ä¸ªç»„ä»¶çš„çˆ¶çº§å¾ˆå°‘æ›´æ–°ï¼Œæ‰€ä»¥å½“TextInputé‡è¦çš„äº‹æƒ…å‘ç”Ÿæ—¶æˆ‘ä»¬åªä¼šâ€œæ¥æ”¶propsâ€ï¼Œæ¯”å¦‚ä¿å­˜è¡¨å•ã€‚")]),t._v(" "),n("p",[t._v("ä½†æ˜å¤©ä½ å¯èƒ½ä¼šç»™TextInputçˆ¶ç»„ä»¶æ·»åŠ ä¸€äº›åŠ¨ç”»ã€‚å¦‚æœå®ƒçš„çˆ¶ç»„ä»¶ç»å¸¸é‡æ–°æ¸²æŸ“ï¼Œå®ƒå°†ç»§ç»­â€œ"),n("a",{attrs:{href:"https://codesandbox.io/s/m3w9zn1z8x",target:"_blank",rel:"noopener noreferrer"}},[t._v("blowing away"),n("OutboundLink")],1),t._v("â€å­ç»„ä»¶çŠ¶æ€ï¼æ‚¨å¯ä»¥åœ¨â€œ"),n("strong",[n("a",{attrs:{href:"https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ‚¨å¯èƒ½ä¸éœ€è¦æ´¾ç”ŸçŠ¶æ€"),n("OutboundLink")],1)]),t._v("â€ä¸­é˜…è¯»æœ‰å…³æ­¤é—®é¢˜çš„æ›´å¤šä¿¡æ¯ã€‚")]),t._v(" "),t._m(43),t._v(" "),n("p",[t._v("é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¿®å¤æˆ‘ä»¬çš„å¿ƒç†æ¨¡å‹ã€‚æˆ‘ä»¬éœ€è¦åœæ­¢å°†â€œæ¥æ”¶propsâ€è§†ä¸ºä¸â€œæ¸²æŸ“â€ä¸åŒçš„ä¸œè¥¿ã€‚ç”±çˆ¶é¡¹å¼•èµ·çš„é‡æ–°å‘ˆç°ä¸åº”ä¸ç”±æˆ‘ä»¬è‡ªå·±çš„æœ¬åœ°çŠ¶æ€æ›´æ”¹å¼•èµ·çš„é‡æ–°å‘ˆç°ä¸åŒã€‚ç»„ä»¶åº”è¯¥å…·æœ‰å¼¹æ€§ï¼Œä»¥ä¾¿æ›´å°‘æˆ–æ›´é¢‘ç¹åœ°å‘ˆç°ï¼Œå¦åˆ™å› ä¸ºå®ƒä»¬å¤ªè¿‡äºä¸å…¶ç‰¹å®šçš„çˆ¶æ¯è€¦åˆã€‚")])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"ä¸è¦è¢«æƒ³è±¡ä¸­çš„é—®é¢˜åˆ†æ•£æ³¨æ„åŠ›"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸è¦è¢«æƒ³è±¡ä¸­çš„é—®é¢˜åˆ†æ•£æ³¨æ„åŠ›","aria-hidden":"true"}},[this._v("#")]),this._v(" ä¸è¦è¢«æƒ³è±¡ä¸­çš„é—®é¢˜åˆ†æ•£æ³¨æ„åŠ›")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("äººä»¬ä¹ æƒ¯äºæŠŠlinterçœ‹æˆä¸€ä¸ª"),n("strong",[t._v("è¿‡åˆ†çƒ­å¿ƒçš„åµé—¹çš„å®ˆé—¨äºº")]),t._v("ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·ã€‚æœ‰ç”¨çš„è­¦å‘Šâš è¢«å¤§é‡çš„é£æ ¼æ ·å¼æ·¹æ²¡ã€‚å› æ­¤ï¼Œäººä»¬åœ¨è°ƒè¯•çš„æ—¶å€™ä¸ä¼šå»ç„ä¸€çœ¼linterä¿¡æ¯ï¼Œå¹¶ä¸”ä¼šé”™è¿‡æœ‰ç”¨çš„æç¤ºã€‚æ­¤å¤–ï¼Œä¸å¤ªä¹ æƒ¯ç¼–å†™JavaScriptçš„äººï¼ˆä¾‹å¦‚ï¼Œè®¾è®¡äººå‘˜ï¼‰æ›´éš¾ä»¥ä½¿ç”¨ä»£ç ã€‚")]),t._v(" "),n("li",[t._v("äººä»¬ä¸ä¼šå­¦ç€åŒºåˆ†æŸç§æ¨¡å¼çš„"),n("strong",[t._v("æœ‰æ•ˆå’Œæ— æ•ˆä½¿ç”¨")]),t._v('ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€æ¡æµè¡Œçš„è§„åˆ™æ˜¯ç¦æ­¢åœ¨componentDidMountå†…éƒ¨è°ƒç”¨setStateã€‚ä½†æ˜¯å¦‚æœå®ƒæ€»æ˜¯"bad"ï¼ŒReactæ ¹æœ¬ä¸ä¼šå…è®¸è¿™æ ·åšã€‚å®ƒæœ‰ä¸€ä¸ªåˆæ³•çš„ç”¨ä¾‹ï¼Œé‚£å°±æ˜¯åº¦é‡DOMèŠ‚ç‚¹çš„å¸ƒå±€ã€‚ä¾‹å¦‚ï¼Œå»å®šä½ä¸€ä¸ªæç¤ºã€‚æˆ‘å·²ç»çœ‹åˆ°äººä»¬é€šè¿‡æ·»åŠ ä¸€ä¸ªsetTimeoutå®Œå…¨å¿½ç•¥è¿™ä¸€ç‚¹â€œè§£å†³â€è¿™ä¸ªè§„åˆ™ã€‚')]),t._v(" "),n("li",[t._v("æœ€ç»ˆï¼Œäººä»¬é‡‡ç”¨â€œå¼ºåˆ¶æ‰§è¡Œè€…å¿ƒæ€â€ï¼Œå¹¶å¯¹é‚£äº›"),n("strong",[t._v("æ²¡æœ‰å¸¦æ¥æœ‰æ„ä¹‰çš„å·®å¼‚")]),t._v("ä½†åœ¨ä»£ç ä¸­æ˜“äºæ‰«æçš„äº‹æƒ…æŒæ‰¹è¯„æ€åº¦ã€‚â€œä½ ä½¿ç”¨äº†ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼Œä½†æ˜¯æˆ‘ä»¬çš„é¡¹ç›®ä½¿ç”¨äº†ç®­å¤´å‡½æ•°ã€‚â€æ¯å½“æˆ‘å¯¹å¼ºåˆ¶æ‰§è¡Œè¿™æ ·çš„è§„åˆ™æœ‰å¼ºçƒˆçš„æ„Ÿè§‰æ—¶ï¼Œæ·±å…¥ç ”ç©¶å°±ä¼šå‘ç°æˆ‘åœ¨è¿™ä¸ªè§„åˆ™ä¸­æŠ•å…¥äº†æƒ…æ„Ÿä¸Šçš„åŠªåŠ› - å¹¶åŠªåŠ›è®©å®ƒå‘æŒ¥ä½œç”¨ã€‚å®ƒè®©æˆ‘é™·å…¥è™šå‡çš„æˆå°±æ„Ÿè€Œä¸æ”¹è¿›æˆ‘çš„ä»£ç ã€‚")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"marie-kondoä½ çš„linté…ç½®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#marie-kondoä½ çš„linté…ç½®","aria-hidden":"true"}},[this._v("#")]),this._v(" Marie Kondoä½ çš„Linté…ç½®")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"ç¼–å†™å¼¹æ€§ç»„ä»¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™å¼¹æ€§ç»„ä»¶","aria-hidden":"true"}},[this._v("#")]),this._v(" ç¼–å†™å¼¹æ€§ç»„ä»¶")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[e("a",{attrs:{href:"#%E5%8E%9F%E5%88%991%EF%BC%9A%E4%B8%8D%E8%A6%81%E5%81%9C%E6%AD%A2%E6%95%B0%E6%8D%AE%E6%B5%81"}},[this._v("ä¸è¦åœæ­¢æ•°æ®æµ")])]),this._v(" "),e("li",[this._v("å§‹ç»ˆå‡†å¤‡æ¸²æŸ“")]),this._v(" "),e("li",[this._v("æ²¡æœ‰å•ç‹¬çš„ç»„ä»¶")]),this._v(" "),e("li",[this._v("ä¿æŒæœ¬åœ°çŠ¶æ€å­¤ç«‹")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"åŸåˆ™1ï¼šä¸è¦åœæ­¢æ•°æ®æµ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åŸåˆ™1ï¼šä¸è¦åœæ­¢æ•°æ®æµ","aria-hidden":"true"}},[this._v("#")]),this._v(" åŸåˆ™1ï¼šä¸è¦åœæ­¢æ•°æ®æµ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"æ¸²æŸ“æ—¶ä¸è¦åœæ­¢æ•°æ®æµ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ¸²æŸ“æ—¶ä¸è¦åœæ­¢æ•°æ®æµ","aria-hidden":"true"}},[this._v("#")]),this._v(" æ¸²æŸ“æ—¶ä¸è¦åœæ­¢æ•°æ®æµ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("// isOk might be driven by state and can change at any time\n<Button color={isOk ? 'blue' : 'red'} />\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("unction Button({ color, children }) {\n  return (\n    // âœ… `color` is always fresh!\n    <button className={'Button-' + color}>\n      {children}\n    </button>\n  );\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class Button extends React.Component {\n  state = {\n    color: this.props.color\n  };\n  render() {\n    const { color } = this.state; // ğŸ”´ `color` is stale!\n    return (\n      <button className={'Button-' + color}>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("// ğŸ”´ No longer works for updates with the above implementation\n<Button color={isOk ? 'blue' : 'red'} />\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("ä½†é€šå¸¸ä½ ä¼šæƒ³"),e("strong",[this._v("ç›´æ¥åœ¨ç»„ä»¶å†…è¯»å–props")]),this._v("ï¼Œå¹¶é¿å…å°†propsï¼ˆæˆ–ä»»ä½•ç”±propsè®¡ç®—æ¥çš„ï¼‰èµ‹å€¼ç»™stateï¼š")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("function Button({ color, children }) {\n  return (\n    // âœ… `color` is always fresh!\n    <button className={'Button-' + color}>\n      {children}\n    </button>\n  );\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class Button extends React.Component {\n  state = {\n    textColor: slowlyCalculateTextColor(this.props.color)\n  };\n  render() {\n    return (\n      <button className={\n        'Button-' + this.props.color +\n        ' Button-text-' + this.state.textColor // ğŸ”´ Stale on `color` prop updates\n      }>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class Button extends React.PureComponent {\n  render() {\n    const textColor = slowlyCalculateTextColor(this.props.color);\n    return (\n      <button className={\n        'Button-' + this.props.color +\n        ' Button-text-' + textColor // âœ… Always fresh\n      }>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class Button extends React.Component {\n  state = {\n    textColor: slowlyCalculateTextColor(this.props.color)\n  };\n  componentDidUpdate(prevProps) {\n    if (prevProps.color !== this.props.color) {\n      // ğŸ˜” Extra re-render for every update\n      this.setState({\n        textColor: slowlyCalculateTextColor(this.props.color),\n      });\n    }\n  }\n  render() {\n    return (\n      <button className={\n        'Button-' + this.props.color +\n        ' Button-text-' + this.state.textColor // âœ… Fresh on final render\n      }>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("function Button({ color, children }) {\n  const textColor = useMemo(\n    () => slowlyCalculateTextColor(color),\n    [color] // âœ… Donâ€™t recalculate until `color` changes\n  );\n  return (\n    <button className={'Button-' + color + ' Button-text-' + textColor}>\n      {children}\n    </button>\n  );\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"ä¸è¦åœæ­¢å‰¯ä½œç”¨ä¸­çš„æ•°æ®æµ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸è¦åœæ­¢å‰¯ä½œç”¨ä¸­çš„æ•°æ®æµ","aria-hidden":"true"}},[this._v("#")]),this._v(" ä¸è¦åœæ­¢å‰¯ä½œç”¨ä¸­çš„æ•°æ®æµ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»è®¨è®ºå¦‚ä½•ä½¿æ¸²æŸ“ç»“æœä¸propsæ”¹å˜ä¿æŒä¸€è‡´ã€‚é¿å…èµ‹å€¼propsåˆ°stateæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚ç„¶è€Œï¼Œé‡è¦çš„æ˜¯ï¼Œ"),e("strong",[this._v("å‰¯ä½œç”¨ï¼ˆä¾‹å¦‚æ•°æ®è·å–ï¼‰ä¹Ÿæ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†")]),this._v("ã€‚")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class SearchResults extends React.Component {\n  state = {\n    data: null\n  };\n  componentDidMount() {\n    this.fetchResults();\n  }\n  fetchResults() {\n    const url = this.getFetchUrl();\n    // Do the fetching...\n  }\n  getFetchUrl() {\n    return 'http://myapi/results?query' + this.props.query;\n  }\n  render() {\n    // ...\n  }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("getFetchUrl() {\n    return 'http://myapi/results?query' + this.props.query;\n  }\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("ä½†æ˜¯å¦‚æœpropså±æ€§queryæ”¹å˜äº†å‘¢ï¼Ÿåœ¨æˆ‘ä»¬çš„ç»„ä»¶ï¼Œä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿã€‚"),e("strong",[this._v("è¿™æ„å‘³ç€æˆ‘ä»¬ç»„ä»¶çš„å‰¯ä½œç”¨æ²¡æœ‰éµå¾ªpropsçš„æ”¹å˜")]),this._v("ã€‚è¿™æ˜¯Reactåº”ç”¨ç¨‹åºä¸­éå¸¸å¸¸è§çš„é”™è¯¯æ¥æºã€‚")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("æŸ¥çœ‹componentDidMountå’Œæ¯ä¸€ä¸ªè°ƒç”¨çš„æ–¹æ³•\n"),n("ul",[n("li",[t._v("æ­¤ä¾‹ä¸­ï¼Œæ˜¯fetchResultså’ŒgetFetchUrl")])])]),t._v(" "),n("li",[t._v("å†™ä¸‹è¿™äº›æ–¹æ³•æ‰€ä½¿ç”¨çš„æ‰€æœ‰propså’Œstate\n"),n("ul",[n("li",[t._v("æ­¤ä¾‹ä¸­ï¼Œæ˜¯this.props.query")])])]),t._v(" "),n("li",[t._v("ç¡®ä¿propsæ— è®ºä½•æ—¶æ›´æ”¹ï¼Œé‡æ–°è°ƒç”¨å‰¯ä½œç”¨\n"),n("ul",[n("li",[t._v("æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ componentDidUpdateæ–¹æ³•æ¥å®Œæˆæ­¤æ“ä½œã€‚")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class SearchResults extends React.Component {\n  state = {\n    data: null\n  };\n  componentDidMount() {\n    this.fetchResults();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.query !== this.props.query) { // âœ… Refetch on change\n      this.fetchResults();\n    }\n  }\n  fetchResults() {\n    const url = this.getFetchUrl();\n    // Do the fetching...\n  }\n  getFetchUrl() {\n    return 'http://myapi/results?query' + this.props.query; // âœ… Updates are handled\n  }\n  render() {\n    // ...\n  }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class SearchResults extends React.Component {\n  state = {\n    data: null,\n    currentPage: 0,\n  };\n  componentDidMount() {\n    this.fetchResults();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.query !== this.props.query) {\n      this.fetchResults();\n    }\n  }\n  fetchResults() {\n    const url = this.getFetchUrl();\n    // Do the fetching...\n  }\n  getFetchUrl() {\n    return (\n      'http://myapi/results?query' + this.props.query +\n      '&page=' + this.state.currentPage // ğŸ”´ Updates are ignored\n    );\n  }\n  render() {\n    // ...\n  }\n}\n")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("æŸ¥çœ‹componentDidMountå’Œæ¯ä¸€ä¸ªè°ƒç”¨çš„æ–¹æ³•\n"),n("ul",[n("li",[t._v("æ­¤ä¾‹ä¸­ï¼Œæ˜¯fetchResultså’ŒgetFetchUrl")])])]),t._v(" "),n("li",[t._v("å†™ä¸‹è¿™äº›æ–¹æ³•æ‰€ä½¿ç”¨çš„æ‰€æœ‰propså’Œstate\n"),n("ul",[n("li",[t._v("æ­¤ä¾‹ä¸­ï¼Œæ˜¯this.props.queryå’Œthis.state.currentPage")])])]),t._v(" "),n("li",[t._v("ç¡®ä¿propsæ— è®ºä½•æ—¶æ›´æ”¹ï¼Œé‡æ–°è°ƒç”¨å‰¯ä½œç”¨\n"),n("ul",[n("li",[t._v("æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ componentDidUpdateæ–¹æ³•æ¥å®Œæˆæ­¤æ“ä½œã€‚")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class SearchResults extends React.Component {\n  state = {\n    data: null,\n    currentPage: 0,\n  };\n  componentDidMount() {\n    this.fetchResults();\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      prevState.currentPage !== this.state.currentPage || // âœ… Refetch on change\n      prevProps.query !== this.props.query\n    ) {\n      this.fetchResults();\n    }\n  }\n  fetchResults() {\n    const url = this.getFetchUrl();\n    // Do the fetching...\n  }\n  getFetchUrl() {\n    return (\n      'http://myapi/results?query' + this.props.query +\n      '&page=' + this.state.currentPage // âœ… Updates are handled\n    );\n  }\n  render() {\n    // ...\n  }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("å¦‚æœæˆ‘ä»¬èƒ½ä»¥æŸç§æ–¹å¼è‡ªåŠ¨æ•æ‰è¿™äº›é”™è¯¯ï¼Œé‚£ä¸æ˜¯å¾ˆå¥½å—")]),this._v("ï¼Ÿè¿™ä¸æ˜¯ä¸€ä¸ªå¯ä»¥å¸®åŠ©æˆ‘ä»¬çš„è§„åˆ™å—ï¼Ÿ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("function SearchResults({ query }) {\n  const [data, setData] = useState(null);\n  const [currentPage, setCurrentPage] = useState(0);\n\n  useEffect(() => {\n    function fetchResults() {\n      const url = getFetchUrl();\n      // Do the fetching...\n    }\n\n    function getFetchUrl() {\n      return (\n        'http://myapi/results?query' + query +\n        '&page=' + currentPage\n      );\n    }\n\n    fetchResults();\n  }, [currentPage, query]); // âœ… Refetch on change\n\n  // ...\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/3/20/1699a18ca90a35bc?w=753&h=611&f=png&s=64355",alt:""}}),this._v("\nï¼ˆè¿™æ˜¯æ–°æ¨èçš„exhaustive-depslintè§„åˆ™çš„æ¼”ç¤ºï¼Œå®ƒæ˜¯eslint-plugin-react-hookså…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚å®ƒå¾ˆå¿«å°†åŒ…å«åœ¨Create React Appä¸­ã€‚ï¼‰")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("è¯·æ³¨æ„ï¼Œæ— è®ºæ‚¨æ˜¯å°†ç»„ä»¶ç¼–å†™ä¸ºç±»è¿˜æ˜¯å‡½æ•°ï¼Œéƒ½å¿…é¡»å°Šé‡effectsçš„æ‰€æœ‰propå’Œstateæ›´æ–°ã€‚")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"æ°¸è¿œä¸è¦åœæ­¢ä¼˜åŒ–æ•°æ®æµ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ°¸è¿œä¸è¦åœæ­¢ä¼˜åŒ–æ•°æ®æµ","aria-hidden":"true"}},[this._v("#")]),this._v(" æ°¸è¿œä¸è¦åœæ­¢ä¼˜åŒ–æ•°æ®æµ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å°è¯•é€šè¿‡ç¼–å†™è‡ªå·±çš„æ¯”è¾ƒæ¥â€œä¼˜åŒ–â€ç»„ä»¶ï¼Œåˆ™å¯èƒ½ä¼šé”™è¯¯åœ°å¿˜è®°æ¯”è¾ƒå‡½æ•°propsï¼š")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class Button extends React.Component {\n  shouldComponentUpdate(prevProps) {\n    // ğŸ”´ Doesn't compare this.props.onClick \n    return this.props.color !== prevProps.color;\n  }\n  render() {\n    const onClick = this.props.onClick; // ğŸ”´ Doesn't reflect updates\n    const textColor = slowlyCalculateTextColor(this.props.color);\n    return (\n      <button\n        onClick={onClick}\n        className={'Button-' + this.props.color + ' Button-text-' + textColor}>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class MyForm extends React.Component {\n  handleClick = () => { // âœ… Always the same function\n    // Do something\n  }\n  render() {\n    return (\n      <>\n        <h1>Hello!</h1>\n        <Button color='green' onClick={this.handleClick}>\n          Press me\n        </Button>\n      </>\n    )\n  }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class MyForm extends React.Component {\n  state = {\n    isEnabled: true\n  };\n  handleClick = () => {\n    this.setState({ isEnabled: false });\n    // Do something\n  }\n  render() {\n    return (\n      <>\n        <h1>Hello!</h1>\n        <Button color='green' onClick={\n          // ğŸ”´ Button ignores updates to the onClick prop\n          this.state.isEnabled ? this.handleClick : null\n        }>\n\n          Press me\n        </Button>\n      </>\n    )\n  }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v(" drafts.map(draft =>\n    <Button\n      color='blue'\n      key={draft.id}\n      onClick={\n        // ğŸ”´ Button ignores updates to the onClick prop\n        this.handlePublish.bind(this, draft.content)\n      }>\n      Publish\n    </Button>\n  )\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("function Button({ onClick, color, children }) {\n  const textColor = slowlyCalculateTextColor(this.props.color);\n  return (\n    <button\n      onClick={onClick}\n      className={'Button-' + color + ' Button-text-' + textColor}>\n      {children}\n    </button>\n  );\n}\nexport default React.memo(Button); // âœ… Uses shallow comparison\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("shouldComponentUpdate(prevProps) {\n    // âœ… Compares this.props.onClick \n    return (\n      this.props.color !== prevProps.color ||\n      this.props.onClick !== prevProps.onClick\n    );\n  }\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("æ€»ç»“æœ¬èŠ‚ï¼Œä¸è¦"),e("strong",[this._v("åœæ­¢æ•°æ®æµ")]),this._v("ï¼")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"åŸåˆ™2ï¼šå§‹ç»ˆå‡†å¤‡å¥½æ¸²æŸ“"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åŸåˆ™2ï¼šå§‹ç»ˆå‡†å¤‡å¥½æ¸²æŸ“","aria-hidden":"true"}},[this._v("#")]),this._v(" åŸåˆ™2ï¼šå§‹ç»ˆå‡†å¤‡å¥½æ¸²æŸ“")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("class TextInput extends React.Component {\n  state = {\n    value: ''\n  };\n  // ğŸ”´ Resets local state on every parent render\n  componentWillReceiveProps(nextProps) {\n    this.setState({ value: nextProps.value });\n  }\n  handleChange = (e) => {\n    this.setState({ value: e.target.value });\n  };\n  render() {\n    return (\n      <input\n        value={this.state.value}\n        onChange={this.handleChange}\n      />\n    );\n  }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("è¿™ç§æ¨¡å¼çš„é—®é¢˜åœ¨äºå®ƒå®Œå…¨ä¾èµ–äºæ„å¤–çš„æ—¶é—´å®‰æ’ã€‚")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("é‚£æˆ‘ä»¬æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ")])])}],!1,null,null,null);e.default=s.exports}}]);