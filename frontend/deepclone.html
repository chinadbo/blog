<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScriptå¦‚ä½•æ·±åº¦æ‹·è´ä¸€ä¸ªæ•°ç»„ | Ioodu Land</title>
    <meta name="description" content="Ioodu&#39;s blog, About web front end development and everything â†’">
    <link rel="icon" href="/blog/favicon.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.2567a312.css" as="style"><link rel="preload" href="/blog/assets/js/app.124ff73c.js" as="script"><link rel="preload" href="/blog/assets/js/5.71b594bd.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.0a69e222.js"><link rel="prefetch" href="/blog/assets/js/11.28002d60.js"><link rel="prefetch" href="/blog/assets/js/2.d8f505d4.js"><link rel="prefetch" href="/blog/assets/js/3.381e31ec.js"><link rel="prefetch" href="/blog/assets/js/4.6ebbc091.js"><link rel="prefetch" href="/blog/assets/js/6.619fe912.js"><link rel="prefetch" href="/blog/assets/js/7.97e05d64.js"><link rel="prefetch" href="/blog/assets/js/8.de62f635.js"><link rel="prefetch" href="/blog/assets/js/9.4cea35d1.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.2567a312.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Ioodu Land</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/frontend/" class="nav-link router-link-active">Front-End</a></div> <a href="https://github.com/chinadbo" target="_blank" rel="noopener noreferrer" class="repo-link">
    æŸ¥çœ‹æºç 
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/frontend/" class="nav-link router-link-active">Front-End</a></div> <a href="https://github.com/chinadbo" target="_blank" rel="noopener noreferrer" class="repo-link">
    æŸ¥çœ‹æºç 
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>JavaScriptå¦‚ä½•æ·±åº¦æ‹·è´ä¸€ä¸ªæ•°ç»„</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/frontend/deepclone.html#æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹" class="sidebar-link">æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/frontend/deepclone.html#æ‹·è´å€¼ç±»å‹" class="sidebar-link">æ‹·è´å€¼ç±»å‹</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/frontend/deepclone.html#æ‹·è´å¼•ç”¨ç±»å‹" class="sidebar-link">æ‹·è´å¼•ç”¨ç±»å‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/frontend/deepclone.html#æ‹·è´å¼•ç”¨ç±»å‹çš„æ–¹æ³•" class="sidebar-link">æ‹·è´å¼•ç”¨ç±»å‹çš„æ–¹æ³•</a></li></ul></li><li><a href="/blog/frontend/deepclone.html#æµ…-æ·±-æ‹·è´" class="sidebar-link">æµ… &amp; æ·± æ‹·è´</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="javascriptå¦‚ä½•æ·±åº¦æ‹·è´ä¸€ä¸ªæ•°ç»„"><a href="#javascriptå¦‚ä½•æ·±åº¦æ‹·è´ä¸€ä¸ªæ•°ç»„" aria-hidden="true" class="header-anchor">#</a> JavaScriptå¦‚ä½•æ·±åº¦æ‹·è´ä¸€ä¸ªæ•°ç»„</h1> <p><img src="https://user-gold-cdn.xitu.io/2019/3/6/169521d1f4660caa?w=698&h=330&f=png&s=63412" alt>
æœ‰ä¸¤ç§æ•°ç»„æ‹·è´ç±»å‹ï¼š<strong>æµ…æ‹·è´ &amp; æ·±æ‹·è´</strong>ã€‚<strong>æµ…æ‹·è´</strong>åªä¼šæ‹·è´æ•°ç»„çš„ç¬¬ä¸€å±‚ï¼Œå‰©ä¸‹çš„ä¼šå¼•ç”¨ã€‚å¦‚æœä½ éœ€è¦ä¸€ä¸ªåµŒå¥—çš„æ•°ç»„çš„æ‹·è´ï¼Œé‚£éœ€è¦ä½ å»æ·±åº¦æ‹·è´è¿™ä¸ªæ•°ç»„ã€‚<strong>æ·±æ‹·è´</strong>ï¼Œé€‰æ‹©JSONæ–¹æ³•æˆ–è€…Lodshåº“å§ğŸ‘</p> <div class="language- extra-class"><pre class="language-text"><code>const numbers = [1, [2], [3, [4]], 5];
// Using JavaScript
JSON.parse(JSON.stringify(numbers));
// Using Lodash
_.cloneDeep(objects);
</code></pre></div><h2 id="æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹"><a href="#æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹" aria-hidden="true" class="header-anchor">#</a> æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹</h2> <p>ä¸ºäº†ææ¸…æ¥šä¸ºä»€ä¹ˆæœ‰ä¸¤ç§ç±»å‹çš„æ‹·è´ï¼Œæˆ‘ä»¬æ¥æ·±åº¦äº†è§£ä¸€ä¸‹åŸºç¡€çŸ¥è¯†ç„¶åè§£é‡Šä»€ä¹ˆæ˜¯å¼•ç”¨ç±»å‹ã€‚</p> <p>ä¸åŸå§‹ç±»å‹ï¼ˆnumberã€stringï¼‰ä¸åŒï¼Œæ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ã€‚è¿™æ„å‘³ç€å½“ä½ æŠŠä¸€ä¸ªæ•°ç»„èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œä½ æ˜¯å°†æ•°ç»„çš„å†…å­˜åœ°å€è€Œéæ•°ç»„æœ¬èº«èµ‹ç»™å˜é‡ã€‚ ğŸ˜±</p> <h2 id="æ‹·è´å€¼ç±»å‹"><a href="#æ‹·è´å€¼ç±»å‹" aria-hidden="true" class="header-anchor">#</a> æ‹·è´å€¼ç±»å‹</h2> <p>è¿™é‡Œæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>value</code>çš„æ‹·è´ã€‚å½“æˆ‘ä»¬æ”¹å˜<code>valueCopy</code>çš„å€¼ï¼Œå®ƒä¸ä¼šå½±å“åŸæ¥çš„<code>value</code>å€¼ã€‚åŒç†ï¼Œå½“æˆ‘ä»¬æ”¹å˜åŸæ¥çš„å€¼å®ƒä¹Ÿä¸ä¼šå½±å“æ‹·è´åçš„å€¼ã€‚å¾ˆå¥½ğŸ‘</p> <div class="language- extra-class"><pre class="language-text"><code>let value = 3;
let valueCopy = value; // create copy
console.log(valueCopy); // 3
// Change valueCopy
valueCopy = 100
console.log(valueCopy); // 100
// âœ… Original NOT affected 
console.log(value); // 3
</code></pre></div><h2 id="æ‹·è´å¼•ç”¨ç±»å‹"><a href="#æ‹·è´å¼•ç”¨ç±»å‹" aria-hidden="true" class="header-anchor">#</a> æ‹·è´å¼•ç”¨ç±»å‹</h2> <p>å¥½çš„ï¼Œè¿™é‡Œå°±ä¼šæœ‰ç‚¹å¥‡æ€ªäº†ï¼æˆ‘ä»¬ç”¨åŒæ ·çš„æ–¹æ³•æ‹·è´æ•°ç»„ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>let array = [1,2,3];
let arrayCopy = array; // create copy
console.log(arrayCopy); // [1,2,3];
// Change 1st element of the array
arrayCopy[0] = 'ğŸ‘»';
console.log(arrayCopy); // [ 'ğŸ‘»', 2, 3 ]
// âŒOriginal got affected
console.log(array); // [ 'ğŸ‘»', 2, 3 ]
</code></pre></div><p>ä¸ºä»€ä¹ˆåŸæ¥çš„æ•°ç»„ä¹Ÿå—åˆ°äº†å½±å“å‘¢ï¼Ÿå¥½äº†ï¼Œæ˜¯å› ä¸ºï¼š<strong>ä½ æ‹·è´çš„ä¸æ˜¯ä½ æ‹·è´çš„</strong>ã€‚è¯´äººè¯ï¼Œæ„æ€å°±æ˜¯ä½ æ‹·è´çš„åªæ˜¯<strong>æŒ‡å‘æ•°ç»„å†…å­˜ç©ºé—´çš„æŒ‡é’ˆ</strong>ã€‚å¼•ç”¨ç±»å‹ä¸åŒ…å«å€¼ï¼Œå®ƒä»¬æ˜¯æŒ‡å‘å†…å­˜ä¸­å€¼çš„<strong>æŒ‡é’ˆ</strong>ã€‚</p> <h3 id="æ‹·è´å¼•ç”¨ç±»å‹çš„æ–¹æ³•"><a href="#æ‹·è´å¼•ç”¨ç±»å‹çš„æ–¹æ³•" aria-hidden="true" class="header-anchor">#</a> æ‹·è´å¼•ç”¨ç±»å‹çš„æ–¹æ³•</h3> <p>è§£å†³æ–¹æ³•å°±æ˜¯æ‹·è´å€¼è€Œä¸æ˜¯æŒ‡é’ˆã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>let array = [1,2,3];
let arrayCopy = [...array]; // create TRUE copy
console.log(arrayCopy); // [1,2,3];
// Change 1st element of the array
arrayCopy[0] = 'ğŸ‘»';
console.log(arrayCopy); // [ 'ğŸ‘»', 2, 3 ]
// âœ… Original NOT affected 
console.log(array); // [ 1, 2, 3 ]
</code></pre></div><h2 id="æµ…-æ·±-æ‹·è´"><a href="#æµ…-æ·±-æ‹·è´" aria-hidden="true" class="header-anchor">#</a> æµ… &amp; æ·± æ‹·è´</h2> <p>å½“æˆ‘ä½¿ç”¨å±•å¼€æ‰©å±•ç¬¦å·<code>...</code>æ¥æ‹·è´ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘åªæ˜¯æµ…æ‹·è´äº†ä¸€ä¸ªæ•°ç»„ã€‚å¦‚æœæ•°ç»„æ˜¯åµŒå¥—æˆ–è€…å¤šç»´çš„ï¼Œè¿™å°±ä¸å¥æ•ˆäº†ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>let nestedArray = [1, [2], 3];
let arrayCopy = [...nestedArray];
// Make some changes
arrayCopy[0] = 'ğŸ‘»'; // change shallow element
arrayCopy[1][0] = 'ğŸ’©'; // change nested element
console.log(arrayCopy); // [ 'ğŸ‘»', [ 'ğŸ’©' ], 3 ]
// âŒ Nested array got affected
console.log(nestedArray); // [ 1, [ 'ğŸ’©' ], 3 ]
</code></pre></div><p>å¦‚ä¸Šï¼Œæµ…æ‹·è´é¦–å±‚æ•°ç»„è¡¨ç°è‰¯å¥½ï¼Œç„¶è€Œï¼Œæ›´æ”¹äº†åµŒå¥—æ•°ç»„å…ƒç´ ï¼ŒåŸå§‹æ•°ç»„ä¹Ÿå—åˆ°å½±å“ğŸ’©ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦ç”¨åˆ°<strong>æ·±æ‹·è´</strong>äº†ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>let nestedArray = [1, [2], 3];
let arrayCopy = JSON.parse(JSON.stringify(nestedArray));
// Make some changes
arrayCopy[0] = 'ğŸ‘»'; // change shallow element
arrayCopy[1][0] = 'ğŸ’©'; // change nested element
console.log(arrayCopy); // [ 'ğŸ‘»', [ 'ğŸ’©' ], 3 ]
// âœ… Nested array NOT affected
console.log(nestedArray); //  1, [ 2 ], 3 ]
</code></pre></div><p>æ‰€ä»¥ï¼Œè¿™å°±å®Œäº‹äº†å—ï¼Ÿè¦ä¸è¦æ‰‹å†™ä¸€ä¸ªæ·±æ‹·è´å¼•ç”¨ç±»å‹çš„æ–¹æ³•ï¼Ÿ</p> <div class="language- extra-class"><pre class="language-text"><code>const deepClone = obj =&gt; {
    const isObject = args =&gt; (typeof args === 'object' || typeof args === 'function') &amp;&amp; typeof args !== null
    if (!isObject) throw new Error('Not Reference Types')
    let newObj = Array.isArray(obj) ? [...obj] : { ...obj }
    Reflect.ownKeys(newObj).map(key =&gt; {
        newObj[key] = isObject(obj[key]) ? deepClone(obj[key]) : obj[key]
    })
    return newObj
}
</code></pre></div><p>âœ… âœ… âœ…</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/chinadbo/blog/edit/master/docs/frontend/deepclone.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æ”¹å–„é¡µé¢ï¼</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/14/2019, 5:46:53 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/blog/assets/js/app.124ff73c.js" defer></script><script src="/blog/assets/js/5.71b594bd.js" defer></script>
  </body>
</html>
